# Multiplayer Tetris

Мультиплеерная игра Тетрис с поддержкой до 3 игроков и системой атак/защиты.

## Описание проекта

Это полнофункциональная реализация классической игры Тетрис с возможностью играть от 1 до 3 игроков одновременно на одном компьютере. Игра включает в себя систему атак: при очистке нескольких линий одновременно, игрок может отправить мусорные линии противнику.

### Основные функции

- **Мультиплеер**: Поддержка 1-3 игроков на одной клавиатуре
- **Система атак**: Очистка нескольких линий генерирует мусорные линии для противников
  - 2 линии → 1 линия мусора
  - 3 линии → 2 линии мусора
  - 4 линии (Tetris) → 4 линии мусора
- **Защита**: Возможность гасить входящие атаки своими очистками линий
- **Выбор цели**: В игре втроем можно выбирать, кого атаковать
- **Прогрессия**: Уровень увеличивается каждые 10 очищенных линий
- **Статистика**: Отображение очков, линий и уровня для каждого игрока

## Структура проекта

Проект состоит из двух независимых пакетов:

```
multiplayer-tetris/
├── game-app/       # Основное игровое приложение
│   ├── src/
│   │   ├── components/    # UI компоненты игры
│   │   ├── pages/         # Страницы (Lobby, GameRoom, Results)
│   │   ├── context/       # React контексты для состояния
│   │   ├── engine/        # Игровая логика (тетромино, коллизии, подсчет)
│   │   ├── multiplayer/   # Система атак и выбора цели
│   │   └── utils/         # Утилиты (управление клавиатурой)
│   └── package.json
│
└── ui-kit/         # Библиотека UI компонентов
    ├── src/
    │   ├── Glass/         # Компонент игрового поля
    │   ├── NextTetromino/ # Превью следующей фигуры
    │   ├── Button/        # Кнопка
    │   ├── Modal/         # Модальное окно
    │   ├── Scoreboard/    # Таблица результатов
    │   └── ...
    └── package.json
```

## Технологический стек

- **React** 19.2.1 - UI библиотека
- **TypeScript** 5.9.3 - Статическая типизация
- **Vite** 7.2.6 - Сборщик и dev-сервер
- **React Router** 7.10.1 - Маршрутизация
- **Jest** 30.2.0 - Тестирование
- **ESLint** 9.39.1 - Линтинг кода

## Установка и запуск

### Предварительные требования

- Node.js 18 или выше
- npm 9 или выше

### Установка зависимостей

```bash
# Установка зависимостей UI-kit
cd ui-kit
npm install
npm run build

# Установка зависимостей game-app
cd ../game-app
npm install
```

### Запуск в режиме разработки

```bash
# Запуск dev сервера
cd game-app
npm run dev
```

Приложение будет доступно по адресу `http://localhost:5173`

### Сборка для production

```bash
# Сборка UI-kit
cd ui-kit
npm run build

# Сборка game-app
cd ../game-app
npm run build
```

## Управление

### Игрок 1 (стрелки)
- ← → - Движение влево/вправо
- ↓ - Ускорение падения
- ↑ - Поворот фигуры
- Пробел - Мгновенное падение
- Enter - Смена цели атаки (только в игре втроем)

### Игрок 2 (WASD)
- A D - Движение влево/вправо
- S - Ускорение падения
- W - Поворот фигуры
- Q - Мгновенное падение
- E - Смена цели атаки (только в игре втроем)

### Игрок 3 (IJKL)
- J L - Движение влево/вправо
- K - Ускорение падения
- I - Поворот фигуры
- U - Мгновенное падение
- O - Смена цели атаки (только в игре втроем)

## Тестирование

```bash
# Запуск тестов UI-kit
cd ui-kit
npm run test

# Запуск тестов game-app
cd ../game-app
npm run test

# Запуск тестов с coverage
npm run test:coverage
```

## Линтинг

```bash
# Проверка кода
npm run lint

# Автоматическое исправление
npm run lint:fix
```

## Примеры работы приложения

### Лобби
В лобби игроки выбирают количество участников (1-3) и вводят свои имена перед началом игры.

### Игровая комната
Игровые поля всех игроков отображаются одновременно. Каждый игрок видит:
- Свое игровое поле с текущей фигурой
- Превью следующей фигуры
- Панель со статистикой (очки, линии, уровень)
- Очередь входящих атак (если есть)
- Текущую цель атаки (в игре втроем)

### Результаты
После окончания игры отображается таблица результатов с местами, очками, количеством очищенных линий и достигнутым уровнем для каждого игрока.

## Архитектурные особенности

- **Модульная архитектура**: Разделение на ui-kit и game-app
- **React Context API**: Управление глобальным состоянием без внешних библиотек
- **Типобезопасность**: Полная типизация TypeScript без использования `any`
- **ES6 Modules**: Использование современного синтаксиса import/export
- **Тестирование**: Unit-тесты для критических компонентов

## Лицензия

Учебный проект для курсовой работы